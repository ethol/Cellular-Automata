package CA;


public class Run {



	public static void main(String[] args) {
		/*
		 * glidergun in a size 41 square CA
		 */
		final int[][]gliderGun = new int[][]{
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0},
				{0,1,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,1,1,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,1,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
				{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},


		};


		final int[][] marioMin = new int[][]{
				{0,0,0,2,2,2,2,2,0,0,0,0},
				{0,0,2,2,2,2,2,2,2,2,2,0},
				{0,0,1,1,1,3,3,1,3,0,0,0},
				{0,1,3,1,3,3,3,1,3,3,3,0},
				{0,1,3,1,1,3,3,3,1,3,3,3},
				{0,1,1,3,3,3,3,1,1,1,1,0},
				{0,0,0,3,3,3,3,3,3,3,0,0},
				{0,0,1,1,2,1,1,1,0,0,0,0},
				{0,1,1,1,2,1,1,2,1,1,1,0},
				{1,1,1,1,2,2,2,2,1,1,1,1},
				{3,3,1,2,3,2,2,3,2,1,3,3},
				{3,3,3,2,2,2,2,2,2,3,3,3},
				{3,3,2,2,2,2,2,2,2,2,3,3},
				{0,0,2,2,2,0,0,2,2,2,0,0},
				{0,1,1,1,0,0,0,0,1,1,1,0},
				{1,1,1,1,0,0,0,0,1,1,1,1}
		};
		final int[][] mario = new int[][]{
				{0,0,0,0,0,2,2,2,2,2,0,0,0,0,0,0},
				{0,0,0,0,2,2,2,2,2,2,2,2,2,0,0,0},
				{0,0,0,0,1,1,1,3,3,1,3,0,0,0,0,0},
				{0,0,0,1,3,1,3,3,3,1,3,3,3,0,0,0},
				{0,0,0,1,3,1,1,3,3,3,1,3,3,3,0,0},
				{0,0,0,1,1,3,3,3,3,1,1,1,1,0,0,0},
				{0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0},
				{0,0,0,0,1,1,2,1,1,1,0,0,0,0,0,0},
				{0,0,0,1,1,1,2,1,1,2,1,1,1,0,0,0},
				{0,0,1,1,1,1,2,2,2,2,1,1,1,1,0,0},
				{0,0,3,3,1,2,3,2,2,3,2,1,3,3,0,0},
				{0,0,3,3,3,2,2,2,2,2,2,3,3,3,0,0},
				{0,0,3,3,2,2,2,2,2,2,2,2,3,3,0,0},
				{0,0,0,0,2,2,2,0,0,2,2,2,0,0,0,0},
				{0,0,0,1,1,1,0,0,0,0,1,1,1,0,0,0},
				{0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0}
		};

		final int[][] creeper = new int[][]{
				{2,2,2,2,2,2,2,2,2,2},
				{2,2,2,2,2,2,2,2,2,2},
				{2,2,1,1,2,2,1,1,2,2},
				{2,2,1,1,2,2,1,1,2,2},
				{2,2,2,2,1,1,2,2,2,2},
				{2,2,2,1,1,1,1,2,2,2},
				{2,2,2,1,1,1,1,2,2,2},
				{2,2,2,1,2,2,1,2,2,2},
				{2,2,2,2,2,2,2,2,2,2},
				{2,2,2,2,2,2,2,2,2,2},
		};

		final int[][] creeperEasy = new int[][]{
				{1,1,0,0,1,1},
				{1,1,0,0,1,1},
				{0,0,1,1,0,0},
				{0,1,1,1,1,0},
				{0,1,1,1,1,0},
				{0,1,0,0,1,0},

		};
		final int[][] mushroom = new int[][]{
				{0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0},
				{0,0,0,1,1,2,2,2,2,0,0,1,1,0,0,0},
				{0,0,1,0,0,2,2,2,2,0,0,0,0,1,0,0},
				{0,1,0,0,2,2,2,2,2,2,0,0,0,0,1,0},
				{0,1,0,2,2,0,0,0,0,2,2,0,0,0,1,0},
				{1,2,2,2,0,0,0,0,0,0,2,2,2,2,2,1},
				{1,2,2,2,0,0,0,0,0,0,2,2,0,0,2,1},
				{1,0,2,2,0,0,0,0,0,0,2,0,0,0,0,1},
				{1,0,0,2,2,0,0,0,0,2,2,0,0,0,0,1},
				{1,0,0,2,2,2,2,2,2,2,2,2,0,0,2,1},
				{1,0,2,2,1,1,1,1,1,1,1,1,2,2,2,1},
				{0,1,1,1,0,0,1,0,0,1,0,0,1,1,1,0},
				{0,0,1,0,0,0,1,0,0,1,0,0,0,1,0,0},
				{0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0},
				{0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0},
				{0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0}
		};




		/*  Initialize variables */ 
		int dimentions = 2; 
		int boardSize = 10;
		int numOfStates = 3;
		int numberOfRuns = 40;
		boolean randomStart = false;
		boolean vonNeumannNeighbourhood = true;

		CA ca = new CA(dimentions, boardSize, numOfStates, randomStart, vonNeumannNeighbourhood);
		ca.useWriter();
		//				ca.setRulesElementary(122);
		//		ca.setRandomRules();
		//		ca.setGameOfLife();
		//		ca.setBoard(gliderGun);
		//		ca.setRules("11101010010010101101110010100001");
		//		ca.setRules("10000101101111011101101111111100");
		//		ca.setRules("10110110011010010010001101111110");
		//		ca.setRules("11000001100000101000000111010000");
		//		ca.setRules("11001100111011011100110100010100");
		//		ca.setRules("3311312132013101133130210202210333022022232322021320312233112313300020312011210313332113031022002130003300321102000213122032302203220331203001201203130003031130000130211310202103202003123023013021130123012003302011013322203102312212023230320301002023031101113233203112300320312311301032221023110213010323021110311213302321232301332213202221113313130320013322020013012310122320210110100313230232221122003123120101102213130333102122111303230002232000023120112100022302232320210122023232323221310033033301121103003213123000332332222031133013320300110130322233031110120013003232311120001213222310132112223303003312103020130201330131210012323013112320200201321203333101112330220211320332023223231222301333323232301311131013100223032300321233023020321010121132022210012110022101233012013132103321020323313131220100131201332023123211312303101131231103300201300203200322331201331123210210321202002131302013202102330011131121221013020333303312121013100221120002223131232213113233013213020023011201023202122120203131031332230032000030");
		//	ca.setRules("3301310230201210320320030212211110300222323310320123202021210123032110231103220011102311123113331232020102023321002103010221300120112303303022333030133102102301331103121203232202131100330332221301201321203113021201321211123220330222303103023010022311111002033130133213112310210200122200131202211212333121101301311112333033302230031203133231230232211102303221330020203313000321312022221210232110103221331120331200302121123231021222033212013210330123100011231122031133210331102323023333122232202230010022102233120130133112230302131103001301332022132221103310133230201131100102203002210230100023220121312000322320220000032213022110322122223031212113130230200322123122213110223100003303223231030303000002003222213023303303310210100103010002103133022103101000313031130000111032131000013113333310022233031232331012101313101133332313112320100321011021303123100033122020302221122001000222321302203332100110331130230303333133001303212032022001321123320211123202203311313022032311100122312233000322201320012221020003010003232202333133");

		//interesting flag ca found using long run TT
		//		ca.setRules("221222330312212003302010333301012332301310223020333221222020110320200000130121121000112303012002033120001002331211300230322013022201320123231311103220213031112333121223032231230210131203323223322103033202222131331113132030103122211333003230332123111220110002010211021203321212230323121200223221123030131330222130102303301220331111111200213223012003322021010300013021332233012030031301120321210030020120303220202202330102331313133132322333321331113210322322132302331232112333323030333100203110312102031131202132001332213031002230313123222233033002202301000333230201321321311122021112101013122120003023030102330331321103303100201333012013022202320322222332002232311203113310110133320202222201011000201031303311333230200321123300003212200023230232132223103111302332012230212213302100033110333030323103122223333131211310231300013222331121330133330121132221301223113323012031330320003031133330122231011211222121312000100002213000031312300311132332220123210333032001010012232221121120101113320022303023311102130213231013010211333" );
		//		ca.setRules("3220333110021301221101333112132133001021133130021322311232120011000201303321300333023103312121123203121003010233213101320023230133012221011333231231101002021120311110310300332332033221231021022211033300211111011030121213230223111123100201203021232031323022331212303112010331200213110001010233010012310213313222131130201013210023013101120110301313302210322232210222221032330223333101010123203301303013311102223203321010302323303102111322300213102103020201030220310200032001110223311011222120223303213220033001221132112001212131310300121100313022230122310123220222131301210032332221223330330232010203322332130113013122222021003211120132102323330202233200202002130310002201231032201313331030111132331130303101300011220010321011211211101100031233223122133202312232231200121102103120230111203220213031331231000012010112100021001201110013101300212211003111223300323100222310111312033300211210201323132123220211301331022030221101120221233222231323222013313020003012021012232021231203101332221010100111220013022301001233213321031313"   );
		/*creeper 100	*/	ca.setRules("100111101122121211102220210001022112021121202212220022122211110222122210200110100010011111210022102002002210010012112121221212202221202222200222201120020021212110200022122220122200211200200020122002221022021111211200011111211122011012201111111");
//		ca.setRules("202201221222222101122022221021001011220222101011102220211112121111112001210022010211221111011112121122210201201201111221220100121120122002110001012221100002122021200022201120220212112200200101102120000222101020010202010200000221201120000002020");

		ca.start(numberOfRuns);
		int m = 0;
		for (int k = 5; k < numberOfRuns; k++) {
			ca.start(1);
			int f = 0;
			for (int i = 0; i < creeperEasy.length; i++) {
				for (int j = 0; j < creeperEasy.length; j++) {
					if(ca.getBoard()[i][j]==creeperEasy[i][j]/**/){
						f ++;
					}
				}

			}
			if(f>m){
				m=f;
				System.out.println("New best  fitness at: " + k);
			}
			System.out.println(k + ":" + f);
		}




	}


}
